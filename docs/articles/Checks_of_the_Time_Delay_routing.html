<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checks of the Time Delay Routing â€¢ dynatop</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Checks of the Time Delay Routing">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dynatop</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/dynatop.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Banding.html">Banding of HSUs</a>
    </li>
    <li>
      <a href="../articles/Checks_of_the_Hillslope_HRU.html">Checks of the Hillslope HRU</a>
    </li>
    <li>
      <a href="../articles/Checks_of_the_Time_Delay_routing.html">Checks of the Time Delay Routing</a>
    </li>
    <li>
      <a href="../articles/Selected_References.html">Selected References</a>
    </li>
    <li>
      <a href="../articles/The_Model_Object.html">The Model Object</a>
    </li>
    <li>
      <a href="../articles/The_solution_of_Dynamic_TOPMODEL.html">The Dynamic TOPMODEL Implimentation</a>
    </li>
    <li>
      <a href="../articles/The_solution_of_Dynamic_TOPMODEL_ordered.html">The Dynamic TOPMODEL Implimentation</a>
    </li>
    <li>
      <a href="../articles/Time_Delay_Channel_Routing.html">Time Delay Channel Routing</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/waternumbers/dynatop">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Checks of the Time Delay Routing</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/waternumbers/dynatop/blob/master/../vignettes/Checks_of_the_Time_Delay_routing.Rmd"><code>../vignettes/Checks_of_the_Time_Delay_routing.Rmd</code></a></small>
      <div class="hidden name"><code>Checks_of_the_Time_Delay_routing.Rmd</code></div>

    </div>

    
    
<p>The purpose of this vignette is to demonstrate somesimulation checks on the computation of time delay routing. It provides both a check for the current implimentation of the code and a demonstration for those that may be developing more complex systems and want to perform their own test.</p>
<p>The basis of the simulations used in the test catchment contained within the package which is loaded with</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co">##rm(list=ls())</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dynatop)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="co">#&gt; Loading required package: xts</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co">#&gt; Loading required package: zoo</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co">#&gt; </span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co">#&gt; Attaching package: 'zoo'</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co">#&gt; </span></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="co">#&gt;     as.Date, as.Date.numeric</span></span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="co">#&gt; Registered S3 method overwritten by 'xts':</span></span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="co">#&gt;   method     from</span></span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="co">#&gt;   as.zoo.xts zoo</span></span>
<span id="cb1-13"><a href="#cb1-13"></a><span class="co">#&gt; Loading required package: Matrix</span></span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"test_catchments"</span>)</span></code></pre></div>
<div id="an-initial-inflow-series" class="section level1">
<h1 class="hasAnchor">
<a href="#an-initial-inflow-series" class="anchor"></a>An initial inflow series</h1>
<p>Generate an initial inflow series of computed by simulating the test catchment</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>sim_inflows &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dynatop.html">dynatop</a></span>(test_catchments<span class="op">$</span>simple_hillslope,test_catchments<span class="op">$</span>obs,<span class="fl">0.0015</span>)<span class="op">$</span>channel_input</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(sim_inflows,<span class="dt">title=</span><span class="st">"Basic inflows set"</span>)</span></code></pre></div>
<p><img src="Checks_of_the_Time_Delay_routing_files/figure-html/initialise_state_func-1.png" width="700"></p>
</div>
<div id="check-the-time-delays" class="section level1">
<h1 class="hasAnchor">
<a href="#check-the-time-delays" class="anchor"></a>Check the time delays</h1>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw"><a href="../reference/compute_time_delay.html">compute_time_delay</a></span>(test_catchments<span class="op">$</span>simple_hillslope)</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="co">#&gt; $point_to_gauge</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co">#&gt;           point_1 point_2</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co">#&gt; outlet          0     400</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co">#&gt; mid_point      NA     325</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="co">#&gt; </span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co">#&gt; $head_to_gauge</span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="co">#&gt;             1   2</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">#&gt; outlet    150 650</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co">#&gt; mid_point  75 575</span></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="co">#&gt; </span></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="co">#&gt; $reach_time</span></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="co">#&gt;   1   2 </span></span>
<span id="cb3-14"><a href="#cb3-14"></a><span class="co">#&gt; 150 500</span></span></code></pre></div>
</div>
<div id="check-the-mass-conservation" class="section level1">
<h1 class="hasAnchor">
<a href="#check-the-mass-conservation" class="anchor"></a>Check the mass conservation</h1>
<p>These simulations aim to check the mass conservation of the model.</p>
<div id="channel-inflows" class="section level2">
<h2 class="hasAnchor">
<a href="#channel-inflows" class="anchor"></a>Channel inflows</h2>
<p>Firstly we do the channel inflows.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co">## make empty point inflows</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>pf &lt;-<span class="st"> </span>sim_inflows; pf[] &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(pf) &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"point_1"</span>,<span class="st">"point_2"</span>)</span>
<span id="cb4-4"><a href="#cb4-4"></a></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="co">## High velocity - everything comes out at once...</span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="co">## set the velocity very high so it all comes out in one time step</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>mdl &lt;-<span class="st"> </span>test_catchments<span class="op">$</span>simple_hillslope</span>
<span id="cb4-8"><a href="#cb4-8"></a>mdl<span class="op">$</span>param[<span class="st">"v_ch_default"</span>] &lt;-<span class="st"> </span><span class="dv">10000</span></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="kw"><a href="../reference/compute_time_delay.html">compute_time_delay</a></span>(mdl) <span class="co"># all values less then 1</span></span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="co">#&gt; $point_to_gauge</span></span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="co">#&gt;           point_1 point_2</span></span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="co">#&gt; outlet          0   0.400</span></span>
<span id="cb4-13"><a href="#cb4-13"></a><span class="co">#&gt; mid_point      NA   0.325</span></span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="co">#&gt; </span></span>
<span id="cb4-15"><a href="#cb4-15"></a><span class="co">#&gt; $head_to_gauge</span></span>
<span id="cb4-16"><a href="#cb4-16"></a><span class="co">#&gt;               1     2</span></span>
<span id="cb4-17"><a href="#cb4-17"></a><span class="co">#&gt; outlet    0.150 0.650</span></span>
<span id="cb4-18"><a href="#cb4-18"></a><span class="co">#&gt; mid_point 0.075 0.575</span></span>
<span id="cb4-19"><a href="#cb4-19"></a><span class="co">#&gt; </span></span>
<span id="cb4-20"><a href="#cb4-20"></a><span class="co">#&gt; $reach_time</span></span>
<span id="cb4-21"><a href="#cb4-21"></a><span class="co">#&gt;    1    2 </span></span>
<span id="cb4-22"><a href="#cb4-22"></a><span class="co">#&gt; 0.15 0.50</span></span>
<span id="cb4-23"><a href="#cb4-23"></a><span class="co">## run routing</span></span>
<span id="cb4-24"><a href="#cb4-24"></a>out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/time_delay_routing.html">time_delay_routing</a></span>(mdl,sim_inflows,</span>
<span id="cb4-25"><a href="#cb4-25"></a>                          <span class="dt">point_inflows=</span>pf)</span>
<span id="cb4-26"><a href="#cb4-26"></a><span class="co">## mass balance as percentage</span></span>
<span id="cb4-27"><a href="#cb4-27"></a>(<span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(out[,<span class="st">'outlet'</span>]) <span class="op">-</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sim_inflows))<span class="op">*</span><span class="dv">100</span><span class="op">/</span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sim_inflows)</span>
<span id="cb4-28"><a href="#cb4-28"></a><span class="co">#&gt; [1] 0</span></span>
<span id="cb4-29"><a href="#cb4-29"></a></span>
<span id="cb4-30"><a href="#cb4-30"></a></span>
<span id="cb4-31"><a href="#cb4-31"></a><span class="co">## break it down over a couple of time steps</span></span>
<span id="cb4-32"><a href="#cb4-32"></a>mdl<span class="op">$</span>param[<span class="st">"v_ch_default"</span>] &lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb4-33"><a href="#cb4-33"></a><span class="kw"><a href="../reference/compute_time_delay.html">compute_time_delay</a></span>(mdl) <span class="co"># all values less then 1</span></span>
<span id="cb4-34"><a href="#cb4-34"></a><span class="co">#&gt; $point_to_gauge</span></span>
<span id="cb4-35"><a href="#cb4-35"></a><span class="co">#&gt;           point_1 point_2</span></span>
<span id="cb4-36"><a href="#cb4-36"></a><span class="co">#&gt; outlet          0     800</span></span>
<span id="cb4-37"><a href="#cb4-37"></a><span class="co">#&gt; mid_point      NA     650</span></span>
<span id="cb4-38"><a href="#cb4-38"></a><span class="co">#&gt; </span></span>
<span id="cb4-39"><a href="#cb4-39"></a><span class="co">#&gt; $head_to_gauge</span></span>
<span id="cb4-40"><a href="#cb4-40"></a><span class="co">#&gt;             1    2</span></span>
<span id="cb4-41"><a href="#cb4-41"></a><span class="co">#&gt; outlet    300 1300</span></span>
<span id="cb4-42"><a href="#cb4-42"></a><span class="co">#&gt; mid_point 150 1150</span></span>
<span id="cb4-43"><a href="#cb4-43"></a><span class="co">#&gt; </span></span>
<span id="cb4-44"><a href="#cb4-44"></a><span class="co">#&gt; $reach_time</span></span>
<span id="cb4-45"><a href="#cb4-45"></a><span class="co">#&gt;    1    2 </span></span>
<span id="cb4-46"><a href="#cb4-46"></a><span class="co">#&gt;  300 1000</span></span>
<span id="cb4-47"><a href="#cb4-47"></a><span class="co">## nned to provide zero flow initial conditions</span></span>
<span id="cb4-48"><a href="#cb4-48"></a>ic &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">channel_inflows=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"1"</span>=<span class="dv">0</span>,<span class="st">"2"</span>=<span class="dv">0</span>))</span>
<span id="cb4-49"><a href="#cb4-49"></a><span class="co">## run routing</span></span>
<span id="cb4-50"><a href="#cb4-50"></a>out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/time_delay_routing.html">time_delay_routing</a></span>(mdl,sim_inflows,</span>
<span id="cb4-51"><a href="#cb4-51"></a>                          <span class="dt">point_inflows=</span>pf,</span>
<span id="cb4-52"><a href="#cb4-52"></a>                          <span class="dt">initial_conditions=</span>ic)</span>
<span id="cb4-53"><a href="#cb4-53"></a><span class="co">## mass balance as percentage</span></span>
<span id="cb4-54"><a href="#cb4-54"></a>(<span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(out[,<span class="st">'outlet'</span>]) <span class="op">-</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sim_inflows))<span class="op">*</span><span class="dv">100</span><span class="op">/</span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sim_inflows)</span>
<span id="cb4-55"><a href="#cb4-55"></a><span class="co">#&gt; [1] 0</span></span></code></pre></div>
</div>
<div id="diffuse-inflows" class="section level2">
<h2 class="hasAnchor">
<a href="#diffuse-inflows" class="anchor"></a>Diffuse inflows</h2>
<p>The diffuse inflow should return exactly the same results</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co">## make empty channel and point inflows</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>cf &lt;-<span class="st"> </span>sim_inflows; cf[] &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>pf &lt;-<span class="st"> </span>cf; <span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(pf) &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"point_1"</span>,<span class="st">"point_2"</span>)</span>
<span id="cb5-4"><a href="#cb5-4"></a></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">## High velocity - everything comes out at once...</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">## set the velocity very high so it all comes out in one time step</span></span>
<span id="cb5-7"><a href="#cb5-7"></a>mdl &lt;-<span class="st"> </span>test_catchments<span class="op">$</span>simple_hillslope</span>
<span id="cb5-8"><a href="#cb5-8"></a>mdl<span class="op">$</span>param[<span class="st">"v_ch_default"</span>] &lt;-<span class="st"> </span><span class="dv">10000</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="kw"><a href="../reference/compute_time_delay.html">compute_time_delay</a></span>(mdl) <span class="co"># all values less then 1</span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="co">#&gt; $point_to_gauge</span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="co">#&gt;           point_1 point_2</span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="co">#&gt; outlet          0   0.400</span></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="co">#&gt; mid_point      NA   0.325</span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="co">#&gt; </span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="co">#&gt; $head_to_gauge</span></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="co">#&gt;               1     2</span></span>
<span id="cb5-17"><a href="#cb5-17"></a><span class="co">#&gt; outlet    0.150 0.650</span></span>
<span id="cb5-18"><a href="#cb5-18"></a><span class="co">#&gt; mid_point 0.075 0.575</span></span>
<span id="cb5-19"><a href="#cb5-19"></a><span class="co">#&gt; </span></span>
<span id="cb5-20"><a href="#cb5-20"></a><span class="co">#&gt; $reach_time</span></span>
<span id="cb5-21"><a href="#cb5-21"></a><span class="co">#&gt;    1    2 </span></span>
<span id="cb5-22"><a href="#cb5-22"></a><span class="co">#&gt; 0.15 0.50</span></span>
<span id="cb5-23"><a href="#cb5-23"></a><span class="co">## run routing</span></span>
<span id="cb5-24"><a href="#cb5-24"></a>out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/time_delay_routing.html">time_delay_routing</a></span>(mdl,cf,</span>
<span id="cb5-25"><a href="#cb5-25"></a>                          <span class="dt">diffuse_inflows =</span> sim_inflows,</span>
<span id="cb5-26"><a href="#cb5-26"></a>                          <span class="dt">point_inflows=</span>pf)</span>
<span id="cb5-27"><a href="#cb5-27"></a><span class="co">## mass balance as percentage</span></span>
<span id="cb5-28"><a href="#cb5-28"></a>(<span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(out[,<span class="st">'outlet'</span>]) <span class="op">-</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sim_inflows))<span class="op">*</span><span class="dv">100</span><span class="op">/</span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sim_inflows)</span>
<span id="cb5-29"><a href="#cb5-29"></a><span class="co">#&gt; [1] 0</span></span>
<span id="cb5-30"><a href="#cb5-30"></a></span>
<span id="cb5-31"><a href="#cb5-31"></a></span>
<span id="cb5-32"><a href="#cb5-32"></a><span class="co">## break it down over a couple of time steps</span></span>
<span id="cb5-33"><a href="#cb5-33"></a>mdl<span class="op">$</span>param[<span class="st">"v_ch_default"</span>] &lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb5-34"><a href="#cb5-34"></a><span class="kw"><a href="../reference/compute_time_delay.html">compute_time_delay</a></span>(mdl) <span class="co"># all values less then 1</span></span>
<span id="cb5-35"><a href="#cb5-35"></a><span class="co">#&gt; $point_to_gauge</span></span>
<span id="cb5-36"><a href="#cb5-36"></a><span class="co">#&gt;           point_1 point_2</span></span>
<span id="cb5-37"><a href="#cb5-37"></a><span class="co">#&gt; outlet          0     800</span></span>
<span id="cb5-38"><a href="#cb5-38"></a><span class="co">#&gt; mid_point      NA     650</span></span>
<span id="cb5-39"><a href="#cb5-39"></a><span class="co">#&gt; </span></span>
<span id="cb5-40"><a href="#cb5-40"></a><span class="co">#&gt; $head_to_gauge</span></span>
<span id="cb5-41"><a href="#cb5-41"></a><span class="co">#&gt;             1    2</span></span>
<span id="cb5-42"><a href="#cb5-42"></a><span class="co">#&gt; outlet    300 1300</span></span>
<span id="cb5-43"><a href="#cb5-43"></a><span class="co">#&gt; mid_point 150 1150</span></span>
<span id="cb5-44"><a href="#cb5-44"></a><span class="co">#&gt; </span></span>
<span id="cb5-45"><a href="#cb5-45"></a><span class="co">#&gt; $reach_time</span></span>
<span id="cb5-46"><a href="#cb5-46"></a><span class="co">#&gt;    1    2 </span></span>
<span id="cb5-47"><a href="#cb5-47"></a><span class="co">#&gt;  300 1000</span></span>
<span id="cb5-48"><a href="#cb5-48"></a><span class="co">## nned to provide zero flow initial conditions</span></span>
<span id="cb5-49"><a href="#cb5-49"></a>ic &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">channel_inflows=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"1"</span>=<span class="dv">0</span>,<span class="st">"2"</span>=<span class="dv">0</span>))</span>
<span id="cb5-50"><a href="#cb5-50"></a><span class="co">## run routing</span></span>
<span id="cb5-51"><a href="#cb5-51"></a>out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/time_delay_routing.html">time_delay_routing</a></span>(mdl,cf,</span>
<span id="cb5-52"><a href="#cb5-52"></a>                          <span class="dt">diffuse_inflows =</span> sim_inflows,</span>
<span id="cb5-53"><a href="#cb5-53"></a>                          <span class="dt">point_inflows=</span>pf,</span>
<span id="cb5-54"><a href="#cb5-54"></a>                          <span class="dt">initial_conditions=</span>ic)</span>
<span id="cb5-55"><a href="#cb5-55"></a><span class="co">## mass balance as percentage</span></span>
<span id="cb5-56"><a href="#cb5-56"></a>(<span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(out[,<span class="st">'outlet'</span>]) <span class="op">-</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sim_inflows))<span class="op">*</span><span class="dv">100</span><span class="op">/</span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sim_inflows)</span>
<span id="cb5-57"><a href="#cb5-57"></a><span class="co">#&gt; [1] 0.0005982599</span></span></code></pre></div>
</div>
<div id="point-inflow" class="section level2">
<h2 class="hasAnchor">
<a href="#point-inflow" class="anchor"></a>Point inflow</h2>
<p>The point inflow tests:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co">## make empty channel and point inflows</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>pf &lt;-<span class="st"> </span>sim_inflows;</span>
<span id="cb6-3"><a href="#cb6-3"></a>cf &lt;-<span class="st"> </span>pf; cf[] &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(pf) &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"point_1"</span>,<span class="st">"point_2"</span>)</span>
<span id="cb6-5"><a href="#cb6-5"></a></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="co">## High velocity - everything comes out at once...</span></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="co">## set the velocity very high so it all comes out in one time step</span></span>
<span id="cb6-8"><a href="#cb6-8"></a>mdl &lt;-<span class="st"> </span>test_catchments<span class="op">$</span>simple_hillslope</span>
<span id="cb6-9"><a href="#cb6-9"></a>mdl<span class="op">$</span>param[<span class="st">"v_ch_default"</span>] &lt;-<span class="st"> </span><span class="dv">10000</span></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="kw"><a href="../reference/compute_time_delay.html">compute_time_delay</a></span>(mdl) <span class="co"># all values less then 1</span></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="co">#&gt; $point_to_gauge</span></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="co">#&gt;           point_1 point_2</span></span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="co">#&gt; outlet          0   0.400</span></span>
<span id="cb6-14"><a href="#cb6-14"></a><span class="co">#&gt; mid_point      NA   0.325</span></span>
<span id="cb6-15"><a href="#cb6-15"></a><span class="co">#&gt; </span></span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="co">#&gt; $head_to_gauge</span></span>
<span id="cb6-17"><a href="#cb6-17"></a><span class="co">#&gt;               1     2</span></span>
<span id="cb6-18"><a href="#cb6-18"></a><span class="co">#&gt; outlet    0.150 0.650</span></span>
<span id="cb6-19"><a href="#cb6-19"></a><span class="co">#&gt; mid_point 0.075 0.575</span></span>
<span id="cb6-20"><a href="#cb6-20"></a><span class="co">#&gt; </span></span>
<span id="cb6-21"><a href="#cb6-21"></a><span class="co">#&gt; $reach_time</span></span>
<span id="cb6-22"><a href="#cb6-22"></a><span class="co">#&gt;    1    2 </span></span>
<span id="cb6-23"><a href="#cb6-23"></a><span class="co">#&gt; 0.15 0.50</span></span>
<span id="cb6-24"><a href="#cb6-24"></a><span class="co">## run routing</span></span>
<span id="cb6-25"><a href="#cb6-25"></a>out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/time_delay_routing.html">time_delay_routing</a></span>(mdl,cf,</span>
<span id="cb6-26"><a href="#cb6-26"></a>                          <span class="dt">point_inflows=</span>pf)</span>
<span id="cb6-27"><a href="#cb6-27"></a><span class="co">## mass balance as percentage</span></span>
<span id="cb6-28"><a href="#cb6-28"></a>(<span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(out[,<span class="st">'outlet'</span>]) <span class="op">-</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sim_inflows))<span class="op">*</span><span class="dv">100</span><span class="op">/</span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(sim_inflows)</span>
<span id="cb6-29"><a href="#cb6-29"></a><span class="co">#&gt; [1] 0</span></span>
<span id="cb6-30"><a href="#cb6-30"></a></span>
<span id="cb6-31"><a href="#cb6-31"></a></span>
<span id="cb6-32"><a href="#cb6-32"></a><span class="co">## break it down over a couple of time steps</span></span>
<span id="cb6-33"><a href="#cb6-33"></a>mdl<span class="op">$</span>param[<span class="st">"v_ch_default"</span>] &lt;-<span class="st"> </span><span class="fl">0.5</span></span>
<span id="cb6-34"><a href="#cb6-34"></a><span class="kw"><a href="../reference/compute_time_delay.html">compute_time_delay</a></span>(mdl) </span>
<span id="cb6-35"><a href="#cb6-35"></a><span class="co">#&gt; $point_to_gauge</span></span>
<span id="cb6-36"><a href="#cb6-36"></a><span class="co">#&gt;           point_1 point_2</span></span>
<span id="cb6-37"><a href="#cb6-37"></a><span class="co">#&gt; outlet          0    8000</span></span>
<span id="cb6-38"><a href="#cb6-38"></a><span class="co">#&gt; mid_point      NA    6500</span></span>
<span id="cb6-39"><a href="#cb6-39"></a><span class="co">#&gt; </span></span>
<span id="cb6-40"><a href="#cb6-40"></a><span class="co">#&gt; $head_to_gauge</span></span>
<span id="cb6-41"><a href="#cb6-41"></a><span class="co">#&gt;              1     2</span></span>
<span id="cb6-42"><a href="#cb6-42"></a><span class="co">#&gt; outlet    3000 13000</span></span>
<span id="cb6-43"><a href="#cb6-43"></a><span class="co">#&gt; mid_point 1500 11500</span></span>
<span id="cb6-44"><a href="#cb6-44"></a><span class="co">#&gt; </span></span>
<span id="cb6-45"><a href="#cb6-45"></a><span class="co">#&gt; $reach_time</span></span>
<span id="cb6-46"><a href="#cb6-46"></a><span class="co">#&gt;     1     2 </span></span>
<span id="cb6-47"><a href="#cb6-47"></a><span class="co">#&gt;  3000 10000</span></span>
<span id="cb6-48"><a href="#cb6-48"></a><span class="co">## need to provide zero flow initial conditions</span></span>
<span id="cb6-49"><a href="#cb6-49"></a>ic &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">channel_inflows=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"1"</span>=<span class="dv">0</span>,<span class="st">"2"</span>=<span class="dv">0</span>))</span>
<span id="cb6-50"><a href="#cb6-50"></a><span class="co">## run routing</span></span>
<span id="cb6-51"><a href="#cb6-51"></a>out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/time_delay_routing.html">time_delay_routing</a></span>(mdl,cf,</span>
<span id="cb6-52"><a href="#cb6-52"></a>                          <span class="dt">point_inflows=</span>pf,</span>
<span id="cb6-53"><a href="#cb6-53"></a>                          <span class="dt">initial_conditions=</span>ic)</span>
<span id="cb6-54"><a href="#cb6-54"></a><span class="co">## mass balance as percentage</span></span>
<span id="cb6-55"><a href="#cb6-55"></a>(<span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(out[,<span class="st">'outlet'</span>]) <span class="op">-</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(pf))<span class="op">*</span><span class="dv">100</span><span class="op">/</span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(pf)</span>
<span id="cb6-56"><a href="#cb6-56"></a><span class="co">#&gt; [1] 0.0119652</span></span></code></pre></div>
</div>
</div>
<div id="checking-a-single-channel" class="section level1">
<h1 class="hasAnchor">
<a href="#checking-a-single-channel" class="anchor"></a>Checking a single channel</h1>
<p>The lower of the test catchment channels has two gauges, one at the foot and one half way down. Providing inflow only to the lower channel should result in half the flow being observed at the mid point gauge.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="co">## make empty point inflows</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>cf &lt;-<span class="st"> </span>sim_inflows</span>
<span id="cb7-3"><a href="#cb7-3"></a>cf[,<span class="st">"2"</span>] &lt;-<span class="st"> </span><span class="dv">0</span> <span class="co"># set flow to upper channel to zero</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>pf &lt;-<span class="st"> </span>sim_inflows; pf[] &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(pf) &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"point_1"</span>,<span class="st">"point_2"</span>)</span>
<span id="cb7-6"><a href="#cb7-6"></a></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="co">## High velocity - everything comes out at once...</span></span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="co">## set the velocity very high so it all comes out in one time step</span></span>
<span id="cb7-9"><a href="#cb7-9"></a>mdl &lt;-<span class="st"> </span>test_catchments<span class="op">$</span>simple_hillslope</span>
<span id="cb7-10"><a href="#cb7-10"></a>mdl<span class="op">$</span>param[<span class="st">"v_ch_default"</span>] &lt;-<span class="st"> </span><span class="dv">10000</span></span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="kw"><a href="../reference/compute_time_delay.html">compute_time_delay</a></span>(mdl) <span class="co"># all values less then 1</span></span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="co">#&gt; $point_to_gauge</span></span>
<span id="cb7-13"><a href="#cb7-13"></a><span class="co">#&gt;           point_1 point_2</span></span>
<span id="cb7-14"><a href="#cb7-14"></a><span class="co">#&gt; outlet          0   0.400</span></span>
<span id="cb7-15"><a href="#cb7-15"></a><span class="co">#&gt; mid_point      NA   0.325</span></span>
<span id="cb7-16"><a href="#cb7-16"></a><span class="co">#&gt; </span></span>
<span id="cb7-17"><a href="#cb7-17"></a><span class="co">#&gt; $head_to_gauge</span></span>
<span id="cb7-18"><a href="#cb7-18"></a><span class="co">#&gt;               1     2</span></span>
<span id="cb7-19"><a href="#cb7-19"></a><span class="co">#&gt; outlet    0.150 0.650</span></span>
<span id="cb7-20"><a href="#cb7-20"></a><span class="co">#&gt; mid_point 0.075 0.575</span></span>
<span id="cb7-21"><a href="#cb7-21"></a><span class="co">#&gt; </span></span>
<span id="cb7-22"><a href="#cb7-22"></a><span class="co">#&gt; $reach_time</span></span>
<span id="cb7-23"><a href="#cb7-23"></a><span class="co">#&gt;    1    2 </span></span>
<span id="cb7-24"><a href="#cb7-24"></a><span class="co">#&gt; 0.15 0.50</span></span>
<span id="cb7-25"><a href="#cb7-25"></a><span class="co">## run routing</span></span>
<span id="cb7-26"><a href="#cb7-26"></a>out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/time_delay_routing.html">time_delay_routing</a></span>(mdl,cf,</span>
<span id="cb7-27"><a href="#cb7-27"></a>                          <span class="dt">point_inflows=</span>pf)</span>
<span id="cb7-28"><a href="#cb7-28"></a><span class="co">## plot ratio</span></span>
<span id="cb7-29"><a href="#cb7-29"></a><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(out[,<span class="st">'outlet'</span>]<span class="op">/</span>out[,<span class="st">'mid_point'</span>])</span>
<span id="cb7-30"><a href="#cb7-30"></a></span>
<span id="cb7-31"><a href="#cb7-31"></a><span class="co">## break it down over a couple of time steps</span></span>
<span id="cb7-32"><a href="#cb7-32"></a>mdl<span class="op">$</span>param[<span class="st">"v_ch_default"</span>] &lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb7-33"><a href="#cb7-33"></a><span class="kw"><a href="../reference/compute_time_delay.html">compute_time_delay</a></span>(mdl) <span class="co"># all values less then 1</span></span>
<span id="cb7-34"><a href="#cb7-34"></a><span class="co">#&gt; $point_to_gauge</span></span>
<span id="cb7-35"><a href="#cb7-35"></a><span class="co">#&gt;           point_1 point_2</span></span>
<span id="cb7-36"><a href="#cb7-36"></a><span class="co">#&gt; outlet          0     800</span></span>
<span id="cb7-37"><a href="#cb7-37"></a><span class="co">#&gt; mid_point      NA     650</span></span>
<span id="cb7-38"><a href="#cb7-38"></a><span class="co">#&gt; </span></span>
<span id="cb7-39"><a href="#cb7-39"></a><span class="co">#&gt; $head_to_gauge</span></span>
<span id="cb7-40"><a href="#cb7-40"></a><span class="co">#&gt;             1    2</span></span>
<span id="cb7-41"><a href="#cb7-41"></a><span class="co">#&gt; outlet    300 1300</span></span>
<span id="cb7-42"><a href="#cb7-42"></a><span class="co">#&gt; mid_point 150 1150</span></span>
<span id="cb7-43"><a href="#cb7-43"></a><span class="co">#&gt; </span></span>
<span id="cb7-44"><a href="#cb7-44"></a><span class="co">#&gt; $reach_time</span></span>
<span id="cb7-45"><a href="#cb7-45"></a><span class="co">#&gt;    1    2 </span></span>
<span id="cb7-46"><a href="#cb7-46"></a><span class="co">#&gt;  300 1000</span></span>
<span id="cb7-47"><a href="#cb7-47"></a><span class="co">## run routing</span></span>
<span id="cb7-48"><a href="#cb7-48"></a>out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/time_delay_routing.html">time_delay_routing</a></span>(mdl,cf,</span>
<span id="cb7-49"><a href="#cb7-49"></a>                          <span class="dt">point_inflows=</span>pf)</span>
<span id="cb7-50"><a href="#cb7-50"></a><span class="co">## plot ratio</span></span>
<span id="cb7-51"><a href="#cb7-51"></a><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(out[,<span class="st">'outlet'</span>]<span class="op">/</span>out[,<span class="st">'mid_point'</span>])</span></code></pre></div>
<p><img src="Checks_of_the_Time_Delay_routing_files/figure-html/half_channel-1.png" width="700"></p>
</div>
<div id="supersition" class="section level1">
<h1 class="hasAnchor">
<a href="#supersition" class="anchor"></a>Supersition</h1>
<p>We should be able to run the reaches seperately and add the results to get the same output as running both combined.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co">## make empty point inflows</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>pf &lt;-<span class="st"> </span>sim_inflows; pf[] &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(pf) &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"point_1"</span>,<span class="st">"point_2"</span>)</span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co">## make two seperate inflows for the two reaches</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>cf1 &lt;-<span class="st"> </span>sim_inflows; cf1[,<span class="dv">2</span>] &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>cf2 &lt;-<span class="st"> </span>sim_inflows; cf2[,<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb8-7"><a href="#cb8-7"></a></span>
<span id="cb8-8"><a href="#cb8-8"></a>mdl<span class="op">$</span>param[<span class="st">"v_ch_default"</span>] &lt;-<span class="st"> </span><span class="fl">0.5</span></span>
<span id="cb8-9"><a href="#cb8-9"></a><span class="co">## simulate</span></span>
<span id="cb8-10"><a href="#cb8-10"></a>out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/time_delay_routing.html">time_delay_routing</a></span>(mdl,sim_inflows,<span class="dt">point_inflows=</span>pf)</span>
<span id="cb8-11"><a href="#cb8-11"></a>out1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/time_delay_routing.html">time_delay_routing</a></span>(mdl,cf1,<span class="dt">point_inflows=</span>pf)</span>
<span id="cb8-12"><a href="#cb8-12"></a>out2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/time_delay_routing.html">time_delay_routing</a></span>(mdl,cf2,<span class="dt">point_inflows=</span>pf)</span>
<span id="cb8-13"><a href="#cb8-13"></a></span>
<span id="cb8-14"><a href="#cb8-14"></a>tmp &lt;-<span class="st"> </span>out1 <span class="op">+</span><span class="st"> </span>out2</span>
<span id="cb8-15"><a href="#cb8-15"></a><span class="kw"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span>(out<span class="op">-</span>tmp))</span>
<span id="cb8-16"><a href="#cb8-16"></a><span class="co">#&gt; [1] 0</span></span>
<span id="cb8-17"><a href="#cb8-17"></a></span>
<span id="cb8-18"><a href="#cb8-18"></a><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span>(out1[,<span class="st">'outlet'</span>],out2[,<span class="st">'outlet'</span>]))</span></code></pre></div>
<p><img src="Checks_of_the_Time_Delay_routing_files/figure-html/sup-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#an-initial-inflow-series">An initial inflow series</a></li>
      <li><a href="#check-the-time-delays">Check the time delays</a></li>
      <li>
<a href="#check-the-mass-conservation">Check the mass conservation</a><ul class="nav nav-pills nav-stacked">
<li><a href="#channel-inflows">Channel inflows</a></li>
      <li><a href="#diffuse-inflows">Diffuse inflows</a></li>
      <li><a href="#point-inflow">Point inflow</a></li>
      </ul>
</li>
      <li><a href="#checking-a-single-channel">Checking a single channel</a></li>
      <li><a href="#supersition">Supersition</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Paul Smith, Peter Metcalfe.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
