<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>R6 Class for Dynamic TOPMODEL — dynatop • dynatop</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="R6 Class for Dynamic TOPMODEL — dynatop" />
<meta property="og:description" content="R6 Class for Dynamic TOPMODEL
R6 Class for Dynamic TOPMODEL" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dynatop</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.11</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/dynatop.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Notes_on_the_implimentation.html">Notes on the Implimentation</a>
    </li>
    <li>
      <a href="../articles/Selected_References.html">Selected References</a>
    </li>
    <li>
      <a href="../articles/The_Model_Object.html">The Model Object</a>
    </li>
    <li>
      <a href="../articles/The_solution_of_Dynamic_TOPMODEL.html">The Dynamic TOPMODEL equations</a>
    </li>
    <li>
      <a href="../articles/Time_Delay_Channel_Routing.html">Time Delay Channel Routing</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/waternumbers/dynatop/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>R6 Class for Dynamic TOPMODEL</h1>
    <small class="dont-index">Source: <a href='https://github.com/waternumbers/dynatop/blob/master/R/dynatop.R'><code>R/dynatop.R</code></a></small>
    <div class="hidden name"><code>dynatop.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>R6 Class for Dynamic TOPMODEL</p>
<p>R6 Class for Dynamic TOPMODEL</p>
    </div>



    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
<h3>Public methods</h3>

<ul>
<li><p><a href='#method-new'><code>dynatop$new()</code></a></p></li>
<li><p><a href='#method-add_data'><code>dynatop$add_data()</code></a></p></li>
<li><p><a href='#method-clear_data'><code>dynatop$clear_data()</code></a></p></li>
<li><p><a href='#method-initialise'><code>dynatop$initialise()</code></a></p></li>
<li><p><a href='#method-sim_hillslope'><code>dynatop$sim_hillslope()</code></a></p></li>
<li><p><a href='#method-sim_channel'><code>dynatop$sim_channel()</code></a></p></li>
<li><p><a href='#method-sim'><code>dynatop$sim()</code></a></p></li>
<li><p><a href='#method-get_channel_inflow'><code>dynatop$get_channel_inflow()</code></a></p></li>
<li><p><a href='#method-plot_channel_inflow'><code>dynatop$plot_channel_inflow()</code></a></p></li>
<li><p><a href='#method-get_gauge_flow'><code>dynatop$get_gauge_flow()</code></a></p></li>
<li><p><a href='#method-plot_gauge_flow'><code>dynatop$plot_gauge_flow()</code></a></p></li>
<li><p><a href='#method-get_obs_data'><code>dynatop$get_obs_data()</code></a></p></li>
<li><p><a href='#method-get_model'><code>dynatop$get_model()</code></a></p></li>
<li><p><a href='#method-get_mass_errors'><code>dynatop$get_mass_errors()</code></a></p></li>
<li><p><a href='#method-get_states'><code>dynatop$get_states()</code></a></p></li>
<li><p><a href='#method-plot_state'><code>dynatop$plot_state()</code></a></p></li>
<li><p><a href='#method-clone'><code>dynatop$clone()</code></a></p></li>
</ul>
<p><hr>
<a id="method-new"></a></p><h3>Method <code>new()</code></h3>
<p>Creates a dynatop class object from the a list based model description as generated by dynatopGIS.</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>dynatop</span>$<span class='fu'>new</span>(<span class='no'>model</span>, <span class='kw'>use_states</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>delta</span> <span class='kw'>=</span> <span class='fl'>1e-13</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>model</code></dt><dd><p>a dynamic TOPMODEL list object</p></dd>

<dt><code>use_states</code></dt><dd><p>logical if states should be imported</p></dd>

<dt><code>verbose</code></dt><dd><p>if set prints out further information</p></dd>

<dt><code>delta</code></dt><dd><p>error term in checking redistribution sums</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>This function makes some basic consistency checks on a list representing a dynamic TOPMODEL model. The checks performed and basic 'sanity' checks. They do not check for the logic of the parameter values nor the consistncy of states and parameters. Sums of the redistribution matrices are checked to be in the range 1 +/- delta.</p>

<h3>Returns</h3>
<p>invisible(self) suitable for chaining</p>
<p><hr>
<a id="method-add_data"></a></p><h3>Method <code>add_data()</code></h3>
<p>Adds observed data to a dynatop object</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>dynatop</span>$<span class='fu'>add_data</span>(<span class='no'>obs_data</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>obs_data</code></dt><dd><p>an xts object of observed data</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>This function makes some basic consistency checks on the observations to ensure they have uniform timestep and all required series are present.</p>

<h3>Returns</h3>
<p>invisible(self) suitable for chaining</p>
<p><hr>
<a id="method-clear_data"></a></p><h3>Method <code>clear_data()</code></h3>
<p>Clears all forcing and simulation data except current states</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>dynatop</span>$<span class='fu'>clear_data</span>()</pre><p></div></p>

<h3>Returns</h3>
<p>invisible(self) suitable for chaining</p>
<p><hr>
<a id="method-initialise"></a></p><h3>Method <code>initialise()</code></h3>
<p>Initialises a dynatop object in the simpliest way possible.</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>dynatop</span>$<span class='fu'>initialise</span>(<span class='no'>initial_recharge</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>initial_recharge</code></dt><dd><p>Initial recharge to the saturated zone in steady state in m/s</p></dd>

</dl><p></div></p>
<h3>Returns</h3>
<p>invisible(self) suitable for chaining</p>
<p><hr>
<a id="method-sim_hillslope"></a></p><h3>Method <code>sim_hillslope()</code></h3>
<p>Simulate the hillslope output of a dynatop object</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>dynatop</span>$<span class='fu'>sim_hillslope</span>(<span class='kw'>mass_check</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>keep_states</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>sub_step</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>mass_check</code></dt><dd><p>Flag indicating is a record of mass balance errors shuld be kept</p></dd>

<dt><code>keep_states</code></dt><dd><p>a vector of POSIXct objects (e.g. from xts) giving the time stamp at which the states should be kept</p></dd>

<dt><code>sub_step</code></dt><dd><p>simulation timestep in seconds, default value of NULL results in data time step</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Both saving the states at every timestep and keeping the mass balance can generate very large data sets!!</p>

<p><hr>
<a id="method-sim_channel"></a></p><h3>Method <code>sim_channel()</code></h3>
<p>Simulate the channel output of a dynatop object</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>dynatop</span>$<span class='fu'>sim_channel</span>(<span class='kw'>mass_check</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>mass_check</code></dt><dd><p>Flag indicating is a record of mass balance errors shuld be kept</p></dd>

</dl><p></div></p>
<h3>Returns</h3>
<p>invisible(self) for chaining</p>
<p><hr>
<a id="method-sim"></a></p><h3>Method <code>sim()</code></h3>
<p>Simulate the hillslope and channel componets of a dynatop object</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>dynatop</span>$<span class='fu'>sim</span>(<span class='kw'>mass_check</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>keep_states</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>sub_step</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>mass_check</code></dt><dd><p>Flag indicating is a record of mass balance errors shuld be kept</p></dd>

<dt><code>keep_states</code></dt><dd><p>a vector of POSIXct objects (e.g. from xts) giving the time stamp at which the states should be kept</p></dd>

<dt><code>sub_step</code></dt><dd><p>simulation timestep in seconds, default value of NULL results in data time step</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Calls the sim_hillslope and sim_channel in sequence. Both saving the states at every timestep and keeping the mass balance can generate very large data sets!!</p>

<h3>Returns</h3>
<p>invisible(self) for chaining</p>
<p><hr>
<a id="method-get_channel_inflow"></a></p><h3>Method <code>get_channel_inflow()</code></h3>
<p>Return channel inflow as an xts series</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>dynatop</span>$<span class='fu'>get_channel_inflow</span>(<span class='kw'>total</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>total</code></dt><dd><p>logical if plot total inflow is to be plotted</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-plot_channel_inflow"></a></p><h3>Method <code>plot_channel_inflow()</code></h3>
<p>Plot the channel inflow</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>dynatop</span>$<span class='fu'>plot_channel_inflow</span>(<span class='kw'>total</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>total</code></dt><dd><p>logical if plot total inflow is to be plotted</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-get_gauge_flow"></a></p><h3>Method <code>get_gauge_flow()</code></h3>
<p>Return flow at the gauges as an xts series</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>dynatop</span>$<span class='fu'>get_gauge_flow</span>(<span class='kw'>gauge</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span>(<span class='no'>private</span>$<span class='no'>time_series</span>$<span class='no'>gauge_flow</span>))</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>gauge</code></dt><dd><p>names of gauges to return (default is all gauges)</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-plot_gauge_flow"></a></p><h3>Method <code>plot_gauge_flow()</code></h3>
<p>Get the flow at gauges</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>dynatop</span>$<span class='fu'>plot_gauge_flow</span>(<span class='kw'>gauge</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span>(<span class='no'>private</span>$<span class='no'>time_series</span>$<span class='no'>gauge_flow</span>))</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>gauge</code></dt><dd><p>names of gauges to return (default is all gauges)</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-get_obs_data"></a></p><h3>Method <code>get_obs_data()</code></h3>
<p>Get the observed data</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>dynatop</span>$<span class='fu'>get_obs_data</span>()</pre><p></div></p>

<p><hr>
<a id="method-get_model"></a></p><h3>Method <code>get_model()</code></h3>
<p>Return the model</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>dynatop</span>$<span class='fu'>get_model</span>()</pre><p></div></p>

<p><hr>
<a id="method-get_mass_errors"></a></p><h3>Method <code>get_mass_errors()</code></h3>
<p>Return the model</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>dynatop</span>$<span class='fu'>get_mass_errors</span>()</pre><p></div></p>

<p><hr>
<a id="method-get_states"></a></p><h3>Method <code>get_states()</code></h3>
<p>Return states</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>dynatop</span>$<span class='fu'>get_states</span>(<span class='kw'>record</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>record</code></dt><dd><p>logical TRUE if the record should be returned. Otherwise surrent states returned</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-plot_state"></a></p><h3>Method <code>plot_state()</code></h3>
<p>Plot a current state of the system</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>dynatop</span>$<span class='fu'>plot_state</span>(<span class='no'>state</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>state</code></dt><dd><p>the name of the state to be plotted</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-clone"></a></p><h3>Method <code>clone()</code></h3>
<p>The objects of this class are cloneable with this method.</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>dynatop</span>$<span class='fu'>clone</span>(<span class='kw'>deep</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p></dd>

</dl><p></div></p>



  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Paul Smith, Peter Metcalfe.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


