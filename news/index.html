<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Changelog • dynatop</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-news">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dynatop</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.0.1001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/dynatop.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/HRU.html">The HRU</a>
    </li>
    <li>
      <a href="../articles/Notes_on_the_implementation_of_Dynamic_TOPMODEL.html">Notes on the implementation of Dynamic TOPMODEL</a>
    </li>
    <li>
      <a href="../articles/The_Model_Object.html">The Model Object</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/waternumbers/dynatop/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1 data-toc-skip>Changelog <small></small></h1>
      <small>Source: <a href="https://github.com/waternumbers/dynatop/blob/HEAD/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="page-header" data-toc-text="0.3.1000" id="dynatop-031000">dynatop 0.3.1000<a class="anchor" aria-label="anchor" href="#dynatop-031000"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-0-3-1000">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-3-1000"></a></h3>
<ul><li>New solution to the surface and saturated zone</li>
<li>Revised model structure</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.2.3" id="dynatop-023">dynatop 0.2.3<small>2022-10-10</small><a class="anchor" aria-label="anchor" href="#dynatop-023"></a></h2>
<ul><li>removed dependency on rgdal</li>
<li>Fix bug in get_states method</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.2.2" id="dynatop-022">dynatop 0.2.2<small>2022-04-13</small><a class="anchor" aria-label="anchor" href="#dynatop-022"></a></h2>
<ul><li>Fixed missing time step in some Courant number calculations</li>
<li>Fixed accounting of channel inflow in mass balance computations and added matching test. Previously impacted simulations with a sub step.</li>
<li>Added Runoff Attenuation Feature (RAF) representation to surface of Hillslope HRU</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.2.1" id="dynatop-021">dynatop 0.2.1<small>2022-01-18</small><a class="anchor" aria-label="anchor" href="#dynatop-021"></a></h2>
<ul><li>Release for CRAN</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.2.0.9200" id="dynatop-0209200">dynatop 0.2.0.9200<a class="anchor" aria-label="anchor" href="#dynatop-0209200"></a></h2>
<ul><li>Fix so using a single channel works correctly</li>
<li>Fix so fluxes passed correctly during initialisation</li>
<li>Fix bug in get_states() so returns correctly when record=FALSE</li>
<li>Tidying for release to CRAN</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.2.0.9101" id="dynatop-0209101">dynatop 0.2.0.9101<a class="anchor" aria-label="anchor" href="#dynatop-0209101"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-0-2-0-9101">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-2-0-9101"></a></h3>
<ul><li>New model structure allowing for the transmissivity profile to be specified per HRU</li>
<li>New transmissivity profile (double exponential) meaning additional parameter columns (m_2, omega) in the model</li>
</ul></div>
<div class="section level3">
<h3 id="other-changes-0-2-0-9101">Other changes<a class="anchor" aria-label="anchor" href="#other-changes-0-2-0-9101"></a></h3>
<ul><li>dropping of Boost bisection algorithm for direct implementation with user specified tolerance and maximum iterations</li>
<li>C++ code refactored for speed improvements, making use of a single hillslope_hru class</li>
<li>Refinements to the vignettes and documentation to reflect changes</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.2.0.904" id="dynatop-020904">dynatop 0.2.0.904*<a class="anchor" aria-label="anchor" href="#dynatop-020904"></a></h2>
<ul><li>changes to improve plotting</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.2.0.9035" id="dynatop-0209035">dynatop 0.2.0.9035<a class="anchor" aria-label="anchor" href="#dynatop-0209035"></a></h2>
<ul><li>Adapted R and C++ code to pass data frames of hillslope and channel properties</li>
<li>tidy up of C++ code</li>
<li>Fix bug in hillslope HRU solution which was indexing incorrect PET value - this will only impact simulations with multiple PET series, if constant then results should be identical to v0.2.0.9030.</li>
<li>Revert Channel routing to compute average flux over the time step</li>
</ul><div class="section level3">
<h3 id="new-features-0-2-0-9035">New features<a class="anchor" aria-label="anchor" href="#new-features-0-2-0-9035"></a></h3>
<ul><li>None</li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-0-2-0-9035">Breaking Changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-2-0-9035"></a></h3>
<ul><li>None</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.2.0.9030" id="dynatop-0209030">dynatop 0.2.0.9030<a class="anchor" aria-label="anchor" href="#dynatop-0209030"></a></h2>
<ul><li>Adapted hillslope solution to Finite Volume to address mass balance issues in v0.2.0.9020</li>
<li>Improved mass balance checking and output</li>
</ul><div class="section level3">
<h3 id="new-features-0-2-0-9030">New features<a class="anchor" aria-label="anchor" href="#new-features-0-2-0-9030"></a></h3>
<ul><li>Addition of two further transmissivity profiles - these implementations should be considered <strong>experimental</strong>
</li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-0-2-0-9030">Breaking Changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-2-0-9030"></a></h3>
<ul><li>Alterations to model structure
<ul><li>Two new data.frames added for defining Precipitation and PET inputs. These can now be specified as weighted sums of observed series.</li>
<li>The parameter vector <code>$param</code> is dropped. Numeric parameters are now stored in the <code>$hillslope</code> and <code>$channel</code> data.frames. This is to allow for cleaner code and future development of different model storage less dependent of <code>*.rds</code> files.</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.2.0.9020" id="dynatop-0209020">dynatop 0.2.0.9020<a class="anchor" aria-label="anchor" href="#dynatop-0209020"></a></h2>
<ul><li>Adapted to use a contour (cross section) solution. This brings brings the model into line with the original dynamic TOPMODEL concept.</li>
<li>Complete rewrite of the hillslope simulation code making better use of std C++ classes and Boost libraries.</li>
</ul><div class="section level3">
<h3 id="breaking-changes-0-2-0-9020">Breaking Changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-2-0-9020"></a></h3>
<ul><li>Model structure altered to contain a further data frame containing all the HRU linkages</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.13" id="dynatop-013">dynatop 0.13<a class="anchor" aria-label="anchor" href="#dynatop-013"></a></h2>
<div class="section level3">
<h3 id="new-features-0-13">New features<a class="anchor" aria-label="anchor" href="#new-features-0-13"></a></h3>
<ul><li>C++ implementation of hillslope simulation code can now return states and is fully feature compatible with R implementation.</li>
<li>R implementation of hillslope simulations will be depreciated in a future release.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.12" id="dynatop-012">dynatop 0.12<a class="anchor" aria-label="anchor" href="#dynatop-012"></a></h2>
<div class="section level3">
<h3 id="new-features-0-12">New features<a class="anchor" aria-label="anchor" href="#new-features-0-12"></a></h3>
<ul><li>Main hydrological simulation code implemented in C++ using Rcpp for better performance.</li>
<li>The R version of the code can be used instead by setting the use_R input parameter to TRUE. This will be depreciated in a later version.</li>
<li>Currently C++ code does not return intermediate states, use the R version if these are required</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.11" id="dynatop-011">dynatop 0.11<a class="anchor" aria-label="anchor" href="#dynatop-011"></a></h2>
<div class="section level3">
<h3 id="new-features-0-11">New features<a class="anchor" aria-label="anchor" href="#new-features-0-11"></a></h3>
<ul><li>improved calculations within the saturated zone</li>
<li>improved mass_check</li>
<li>more complete vignette - model equation and coding notes</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.1" id="dynatop-01">dynatop 0.1<a class="anchor" aria-label="anchor" href="#dynatop-01"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-0-1">Breaking Changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-1"></a></h3>
<ul><li>Code base reformulated in an Object orientated form using the <code>R6</code> package. Except for change below algorithms as for v0.0.4</li>
<li>Input format of model changed to reflect <code>dynatopGIS</code> v0.1</li>
<li>Removal of banding functions since these are now in dynatopGIS</li>
<li>All units now in m and seconds</li>
<li>Precipitation and PET inputs now expected to be metres accrued over the time step rather then m per hour</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-1">New Features<a class="anchor" aria-label="anchor" href="#new-features-0-1"></a></h3>
<ul><li>Reformulation allows for data and code to saved in a single object allowing fuller reproducibility</li>
<li>Additional plotting and data extraction functions</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.4" id="dynatop-004">dynatop 0.0.4<a class="anchor" aria-label="anchor" href="#dynatop-004"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-0-0-4">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-0-4"></a></h3>
<ul><li>New solutions to the surface and saturated zone means models for previous versions of dynatop will not work. See the model description and the <code>dynatopGIS</code> package (0.0.4) for a method of generating models in the revised format</li>
</ul></div>
<div class="section level3">
<h3 id="other-changes-0-0-4">Other changes<a class="anchor" aria-label="anchor" href="#other-changes-0-0-4"></a></h3>
<ul><li>The surface store, previously labelled <span class="math inline"><em>s</em><sub><em>e</em><em>x</em></sub></span> has been relabelled <span class="math inline"><em>s</em><sub><em>s</em><em>f</em></sub></span> since this is felt to be more logical.</li>
<li>The <code>Matrix</code> package is allowing the use of sparse matrices.</li>
<li>Computation bands have been introduced for the surface and saturated zones. These allow the revised solutions below. See the associated vignette on banding HSUs</li>
<li>A revised approximation to the surface water movement has been implemented allowing for larger numbers of HSUs without the performance overhead of computing large matrix exponential.</li>
<li>A four point kinematic wave solution to the saturated zone is utilised. This is both more performant and has better representation of hillslope length then the numerical ODE solution used in v0.0.3.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.3" id="dynatop-003">dynatop 0.0.3<a class="anchor" aria-label="anchor" href="#dynatop-003"></a></h2>
<div class="section level3">
<h3 id="new-features-0-0-3">New features<a class="anchor" aria-label="anchor" href="#new-features-0-0-3"></a></h3>
<ul><li>Added time delay histogram river routing. See vignettes on theory and use.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-0-3">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-3"></a></h3>
<ul><li>Fixed some mass balance issues in dynatop relating to the saturated zone solution in dynatop</li>
<li>Improved handling of case of infinite saturated zone deficit</li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-0-0-3">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-0-3"></a></h3>
<ul><li>The model structure has been adapted to allow for the channel connectivity and specification of gauges and inputs on the channel network. See the model object vignette. If using dynatopGIS then rerun create_model.</li>
</ul></div>
<div class="section level3">
<h3 id="other-changes-0-0-3">Other changes<a class="anchor" aria-label="anchor" href="#other-changes-0-0-3"></a></h3>
<ul><li>Fixed minor formatting issues in the vignettes</li>
<li>Added vignette on checking mass balances</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.2" id="dynatop-002">dynatop 0.0.2<a class="anchor" aria-label="anchor" href="#dynatop-002"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-0-0-2">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-2"></a></h3>
<ul><li>Added purl=FALSE where error=TRUE in vignette</li>
</ul></div>
<div class="section level3">
<h3 id="other-changes-0-0-2">Other changes<a class="anchor" aria-label="anchor" href="#other-changes-0-0-2"></a></h3>
<ul><li>Removed unused Rcpp functions and library dependencies</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.1" id="dynatop-001">dynatop 0.0.1<a class="anchor" aria-label="anchor" href="#dynatop-001"></a></h2>
<div class="section level3">
<h3 id="other-changes-0-0-1">Other changes<a class="anchor" aria-label="anchor" href="#other-changes-0-0-1"></a></h3>
<ul><li>Removed vignette data from package to reduce size. Now on git hub</li>
<li>Minor spelling and format changes to vignette</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.0.9000" id="dynatop-0009000">dynatop 0.0.0.9000<a class="anchor" aria-label="anchor" href="#dynatop-0009000"></a></h2>
<div class="section level3">
<h3 id="context-0-0-0-9000">Context<a class="anchor" aria-label="anchor" href="#context-0-0-0-9000"></a></h3>
<p>This package is the result of an almost complete rewrite of the dynatopmodel package formally CRAN and the associated development code (not in the public domain).</p>
<p>This package contains the code for model evaluation and helpers for preparing time series input data. The package <a href="https://waternumbers.github.io/dynatopGIS/" class="external-link">dynatopGIS</a> contains the tools for preparing models from GIS data.</p>
</div>
<div class="section level3">
<h3 id="new-features-0-0-0-9000">New Features<a class="anchor" aria-label="anchor" href="#new-features-0-0-0-9000"></a></h3>
<ul><li>New definition of a dynamic TOPMODEL ‘object’ - separates out GIS data for more compact size - introduces the concept of Hydrological Response Unit (HRU) types - Altered HRU definition table to allow for more transparent and easy reparametrisation - Altered HRU definition table to allow for more transparent use of multiple input series (referenced by name, not input column)</li>
<li>Altered input of time series data to a single xts object containing names columns</li>
<li>New output list containing: - model object, with final states of the system - xts object of flows to channel HRUs</li>
<li>Rewritten initialisation and main execution loop of dynamic TOPMODEL so that - Channels are handled explicitly not as ‘special cases’ (parametrisations) of hillslope units - Analytical solution of root zone can handle case where both pet and precip are positive - Initialisation does not return a new workspace</li>
<li>Vignettes documenting - use of dynamic TOPMODEL - Equations and solution methodology - Performance of code for larger simulations</li>
<li>‘Hard’ checks are now implemented, previously code was performing various ‘corrections’ sometimes without warning.</li>
<li>Model simulation can be initialised by passed in states allowing for chinking of the longer simulations.</li>
</ul></div>
<div class="section level3">
<h3 id="regressions-of-note-0-0-0-9000">Regressions of note<a class="anchor" aria-label="anchor" href="#regressions-of-note-0-0-0-9000"></a></h3>
<ul><li>Plotting functions and performance calculations have not been replicated</li>
<li>The time delay histogram method for river routing is not implemented</li>
<li>Model no longer outputs states and fluxes at every time step</li>
</ul></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Paul Smith, Peter Metcalfe.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

