<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Changelog â€¢ dynatop</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Changelog" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-news">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dynatop</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0.9102</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/dynatop.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Channel_HRU.html">Channel HRU</a>
    </li>
    <li>
      <a href="../articles/Hillslope_HRU.html">The Hillslope HRU</a>
    </li>
    <li>
      <a href="../articles/Notes_on_the_implementation_of_Dynamic_TOPMODEL.html">Notes on the implementation of Dynamic TOPMODEL</a>
    </li>
    <li>
      <a href="../articles/Selected_References.html">Selected References</a>
    </li>
    <li>
      <a href="../articles/The_Model_Object.html">The Model Object</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/waternumbers/dynatop/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1 data-toc-skip>Changelog <small></small></h1>
      <small>Source: <a href='https://github.com/waternumbers/dynatop/blob/master/NEWS.md'><code>NEWS.md</code></a></small>
    </div>

    <div id="dynatop-0209101" class="section level1">
<h1 class="page-header" data-toc-text="0.2.0.9101">
<a href="#dynatop-0209101" class="anchor"></a>dynatop 0.2.0.9101</h1>
<div id="breaking-changes" class="section level2">
<h2 class="hasAnchor">
<a href="#breaking-changes" class="anchor"></a>Breaking changes</h2>
<ul>
<li>New model structure allowing for the transmissivity profile to be specified per HRU</li>
<li>New transmissivity profile (double exponential) meaning additional parameter columnes (m_2, omega) in the model</li>
</ul>
</div>
<div id="other-changes" class="section level2">
<h2 class="hasAnchor">
<a href="#other-changes" class="anchor"></a>Other changes</h2>
<ul>
<li>dropping of Boost bisection algorithm for direct implimentation with user specified tolerance and maximum iterations</li>
<li>C++ code refactored for speed improvements, making use of a single hillslope_hru class</li>
<li>Refinements to the vignettes and documentation to reflect changes</li>
</ul>
</div>
</div>
    <div id="dynatop-020904" class="section level1">
<h1 class="page-header" data-toc-text="0.2.0.904">
<a href="#dynatop-020904" class="anchor"></a>dynatop 0.2.0.904*</h1>
<ul>
<li>changes to improve plotting</li>
</ul>
</div>
    <div id="dynatop-0209035" class="section level1">
<h1 class="page-header" data-toc-text="0.2.0.9035">
<a href="#dynatop-0209035" class="anchor"></a>dynatop 0.2.0.9035</h1>
<ul>
<li>Adapted R and C++ code to pass data frames of hillslope and channel properties</li>
<li>tidy up of C++ code</li>
<li>Fix bug in hillslope HRU solution which was indexing incorrect PET value - this will only impact simulations with multiple PET series, if constant then results shoudl be identical to v0.2.0.9030.</li>
<li>Revert Channel routing to compute average flux over the time step</li>
</ul>
<div id="new-features" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features" class="anchor"></a>New features</h2>
<ul>
<li>None</li>
</ul>
</div>
<div id="breaking-changes-1" class="section level2">
<h2 class="hasAnchor">
<a href="#breaking-changes-1" class="anchor"></a>Breaking Changes</h2>
<ul>
<li>None</li>
</ul>
</div>
</div>
    <div id="dynatop-0209030" class="section level1">
<h1 class="page-header" data-toc-text="0.2.0.9030">
<a href="#dynatop-0209030" class="anchor"></a>dynatop 0.2.0.9030</h1>
<ul>
<li>Adapted hillslope solution to Finite Volume to address mass balance issues in v0.2.0.9020</li>
<li>Improved mass balance checkign and output</li>
</ul>
<div id="new-features-1" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features-1" class="anchor"></a>New features</h2>
<ul>
<li>Addition of two further transmissivity profiles - these implimentations should be considered <strong>experimental</strong>
</li>
</ul>
</div>
<div id="breaking-changes-2" class="section level2">
<h2 class="hasAnchor">
<a href="#breaking-changes-2" class="anchor"></a>Breaking Changes</h2>
<ul>
<li>Alterations to model sturcture
<ul>
<li>Two new data.frames added for defining Precipitation and PET inputs. These can now be specified as weighted sums of observed series.</li>
<li>The parameter vector <code>$param</code> is dropped. Numeric parameters are now stored in the <code>$hillslope</code> and <code>$channel</code> data.frames. This is to allow for cleaner code and future development of different model stroage less dependent of <code>*.rds</code> files.</li>
</ul>
</li>
</ul>
</div>
</div>
    <div id="dynatop-0209020" class="section level1">
<h1 class="page-header" data-toc-text="0.2.0.9020">
<a href="#dynatop-0209020" class="anchor"></a>dynatop 0.2.0.9020</h1>
<ul>
<li>Adapted to use a contour (cross section) solution. This brings brings the model into line with the original dynamic TOPMODEL concept.</li>
<li>Complete rewrite of the hillslope simulation code making better use of std C++ classes and Boost libraries.</li>
</ul>
<div id="breaking-changes-3" class="section level2">
<h2 class="hasAnchor">
<a href="#breaking-changes-3" class="anchor"></a>Breaking Changes</h2>
<ul>
<li>Model structure altered to contain a further data frame containing all the HRU linkages</li>
</ul>
</div>
</div>
    <div id="dynatop-013" class="section level1">
<h1 class="page-header" data-toc-text="0.13">
<a href="#dynatop-013" class="anchor"></a>dynatop 0.13</h1>
<div id="new-features-2" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features-2" class="anchor"></a>New features</h2>
<ul>
<li>C++ implimentation of hillslope simulation code can now return states and is fully feature compatable with R implimentation.</li>
<li>R implimentation of hillslope simulations will be depreciated in a future release.</li>
</ul>
</div>
</div>
    <div id="dynatop-012" class="section level1">
<h1 class="page-header" data-toc-text="0.12">
<a href="#dynatop-012" class="anchor"></a>dynatop 0.12</h1>
<div id="new-features-3" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features-3" class="anchor"></a>New features</h2>
<ul>
<li>Main hydrological simulation code implimented in C++ usign Rcpp for better performance.</li>
<li>The R version of the code can be used instead by setting the use_R input parameter to TRUE. This will be depreciated in a later version.</li>
<li>Currently C++ code does not return intermediate states, use the R version if these are required</li>
</ul>
</div>
</div>
    <div id="dynatop-011" class="section level1">
<h1 class="page-header" data-toc-text="0.11">
<a href="#dynatop-011" class="anchor"></a>dynatop 0.11</h1>
<div id="new-features-4" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features-4" class="anchor"></a>New features</h2>
<ul>
<li>improved calculations within the saturated zone</li>
<li>improved mass_check</li>
<li>more complet vignette - model equation and coding notes</li>
</ul>
</div>
</div>
    <div id="dynatop-01" class="section level1">
<h1 class="page-header" data-toc-text="0.1">
<a href="#dynatop-01" class="anchor"></a>dynatop 0.1</h1>
<div id="breaking-changes-4" class="section level2">
<h2 class="hasAnchor">
<a href="#breaking-changes-4" class="anchor"></a>Breaking Changes</h2>
<ul>
<li>Code base reformulated in an Object orientated form using the <code>R6</code> package. Except for change below algorithms as for v0.0.4</li>
<li>Input format of model changed to reflect <code>dynatopGIS</code> v0.1</li>
<li>Removal of banding functions since these are now in dynatopGIS</li>
<li>All units now in m and seconds</li>
<li>Precipitation and PET inputs now expected to be metres accured over the timestep rather then m per hour</li>
</ul>
</div>
<div id="new-features-5" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features-5" class="anchor"></a>New Features</h2>
<ul>
<li>Reformulation allows for data and code to saved in a single object allowing fuller reproducibility</li>
<li>Additional plotting and data extraction functions</li>
</ul>
</div>
</div>
    <div id="dynatop-004" class="section level1">
<h1 class="page-header" data-toc-text="0.0.4">
<a href="#dynatop-004" class="anchor"></a>dynatop 0.0.4</h1>
<div id="breaking-changes-5" class="section level2">
<h2 class="hasAnchor">
<a href="#breaking-changes-5" class="anchor"></a>Breaking changes</h2>
<ul>
<li>New solutions to the surface and saturated zone means models for previous versions of dynatop will not work. See the model description and the <code>dynatopGIS</code> package (0.0.4) for a method of generating models int he revised format</li>
</ul>
</div>
<div id="other-changes-1" class="section level2">
<h2 class="hasAnchor">
<a href="#other-changes-1" class="anchor"></a>Other changes</h2>
<ul>
<li>The surface store, previously labeled <span class="math inline"><em>s</em><sub><em>e</em><em>x</em></sub></span> has been relabelled <span class="math inline"><em>s</em><sub><em>s</em><em>f</em></sub></span> since this is felt to be more logical.</li>
<li>The <code>Matrix</code> package is allowing the use of sparse matrices.</li>
<li>Computation bands have been introduced for the surface and saturated zones. These allow the revised solutions below. See the associated vignette on banding HSUs</li>
<li>A revised approximation to the surface water movement has been implimented allowing for larger numbers of HSUs without the performance overhead of computing large matrix exponentials.</li>
<li>A four point kinematic wave solution to the saturated zone is utilised. This is both more performant and has better representation of hillslope length then the numerical ODE solution used in v0.0.3.</li>
</ul>
</div>
</div>
    <div id="dynatop-003" class="section level1">
<h1 class="page-header" data-toc-text="0.0.3">
<a href="#dynatop-003" class="anchor"></a>dynatop 0.0.3</h1>
<div id="new-features-6" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features-6" class="anchor"></a>New features</h2>
<ul>
<li>Added time delay histogram river routing. See vignettes on theory and use.</li>
</ul>
</div>
<div id="bug-fixes" class="section level2">
<h2 class="hasAnchor">
<a href="#bug-fixes" class="anchor"></a>Bug fixes</h2>
<ul>
<li>Fixed some mass balance issues in dynatop relating to the saturated zone solution in dynatop</li>
<li>Improved handling of case of infinite saturated zone deficit</li>
</ul>
</div>
<div id="breaking-changes-6" class="section level2">
<h2 class="hasAnchor">
<a href="#breaking-changes-6" class="anchor"></a>Breaking changes</h2>
<ul>
<li>The model structure has been adapted to allow for the channel connectivity and specification of gauges and inputs on the channel network. See the model object vignette. If using dynatopGIS then rerun create_model.</li>
</ul>
</div>
<div id="other-changes-2" class="section level2">
<h2 class="hasAnchor">
<a href="#other-changes-2" class="anchor"></a>Other changes</h2>
<ul>
<li>Fixed minor formating issues in the vignettes</li>
<li>Added vignette on checking mass balances</li>
</ul>
</div>
</div>
    <div id="dynatop-002" class="section level1">
<h1 class="page-header" data-toc-text="0.0.2">
<a href="#dynatop-002" class="anchor"></a>dynatop 0.0.2</h1>
<div id="bug-fixes-1" class="section level2">
<h2 class="hasAnchor">
<a href="#bug-fixes-1" class="anchor"></a>Bug fixes</h2>
<ul>
<li>Added purl=FALSE where error=TRUE in vignette</li>
</ul>
</div>
<div id="other-changes-3" class="section level2">
<h2 class="hasAnchor">
<a href="#other-changes-3" class="anchor"></a>Other changes</h2>
<ul>
<li>Removed unused Rcpp functions and library dependencies</li>
</ul>
</div>
</div>
    <div id="dynatop-001" class="section level1">
<h1 class="page-header" data-toc-text="0.0.1">
<a href="#dynatop-001" class="anchor"></a>dynatop 0.0.1</h1>
<div id="other-changes-4" class="section level2">
<h2 class="hasAnchor">
<a href="#other-changes-4" class="anchor"></a>Other changes</h2>
<ul>
<li>Removed vignette data from package to reduce size. Now on git hub</li>
<li>Minor spelling and format changes to vignette</li>
</ul>
</div>
</div>
    <div id="dynatop-0009000" class="section level1">
<h1 class="page-header" data-toc-text="0.0.0.9000">
<a href="#dynatop-0009000" class="anchor"></a>dynatop 0.0.0.9000</h1>
<div id="context" class="section level2">
<h2 class="hasAnchor">
<a href="#context" class="anchor"></a>Context</h2>
<p>This package is the result of an almost complete rewrite of the dynatopmodel package formally CRAN and the associated development code (not in the public domain).</p>
<p>This package contains the code for model evaluation and helpers for preparing time series input data. The package <a href="https://waternumbers.github.io/dynatopGIS/">dynatopGIS</a> contains the tools for preparing models from GIS data.</p>
</div>
<div id="new-features-7" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features-7" class="anchor"></a>New Features</h2>
<ul>
<li>New definition of a dynamic TOPMODEL â€˜objectâ€™ - seperates out GIS data for more compact size - introduces the concept of Hydrological Response Unit (HRU) types - Altered HRU definition table to allow for more transparent and easy reparameterisation - Altered HRU definition table to allow for more transparent use of multiple input series (referenced by name, not input column)</li>
<li>Altered input of time series data to a single xts object containing names columns</li>
<li>New output list containing: - model object, with final states of the system - xts object of flows to channel HRUs</li>
<li>Rewritten initialisation and main execution loop of dynamic TOPMODEL so that - Chanels are handled explicily not as â€˜special casesâ€™ (parameterisations) of hillslope units - Analytical solution of root zone can handle case where both pet and precip are positive - Initialisation does not return a new workspace</li>
<li>Vignettes documenting - use of dynamic TOPMODEL - Equations and solution methodology - Performance of code for larger simulations</li>
<li>â€˜Hardâ€™ checks are now implimented, previously code was performaing various â€˜correctionsâ€™ sometimes without warning.</li>
<li>Model simulation can be initialised by passed in states allowing for chinking of the longer simulations.</li>
</ul>
</div>
<div id="regressions-of-note" class="section level2">
<h2 class="hasAnchor">
<a href="#regressions-of-note" class="anchor"></a>Regressions of note</h2>
<ul>
<li>Plotting functions and performance calculations have not been replicated</li>
<li>The time delay historgram method for river routing is not implimented</li>
<li>Model no longer outputs states and fluxes at every time step</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>

</div>


      <footer>
      <div class="copyright">
  <p>Developed by Paul Smith, Peter Metcalfe.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


